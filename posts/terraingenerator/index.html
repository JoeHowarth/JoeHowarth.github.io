<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage">
  <head>
    

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title>Terrain Generator Module - Joe Howarth</title>
  <meta property="og:title" content="Terrain Generator Module" />
  <meta name="twitter:title" content="Terrain Generator Module" />
  <meta name="description" content="Terrain Generator Module This module will produce the base maps that the rest of the world is built on top of. This module should be standalone and therefore easily runnable and configurable without the rest of the project. This has several advantages: 1. Faster compilation times =&gt; faster iteration feedback loop 2. Ability to generate many candidate maps and select the most interesting ones to build a full world with.">
  <meta property="og:description" content="Terrain Generator Module This module will produce the base maps that the rest of the world is built on top of. This module should be standalone and therefore easily runnable and configurable without the rest of the project. This has several advantages: 1. Faster compilation times =&gt; faster iteration feedback loop 2. Ability to generate many candidate maps and select the most interesting ones to build a full world with.">
  <meta name="twitter:description" content="Terrain Generator Module This module will produce the base maps that the rest of the world is built on top of. This module should be standalone and therefore easily runnable and configurable without …">
  <meta name="author" content="Joe Howarth"/><script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "WebSite",
    "name": "Joe Howarth",
    
    "url": "https:\/\/joehowarth.github.io"
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "",
  "url": "https:\/\/joehowarth.github.io"
  
  
  
  
}
</script>
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "item": {
          "@id": "https:\/\/joehowarth.github.io",
          "name": "home"
        }
    },{
        "@type": "ListItem",
        "position": 3,
        "item": {
          "@id": "https:\/\/joehowarth.github.io\/posts\/terraingenerator\/",
          "name": "Terrain generator module"
        }
    }]
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "author": {
    "name" : "Joe Howarth"
  },
  "headline": "Terrain Generator Module",
  "description" : "Terrain Generator Module This module will produce the base maps that the rest of the world is built on top of. This module should be standalone and therefore easily runnable and configurable without the rest of the project. This has several advantages: 1. Faster compilation times =\x26gt; faster iteration feedback loop 2. Ability to generate many candidate maps and select the most interesting ones to build a full world with.",
  "inLanguage" : "en",
  "wordCount":  724 ,
  "datePublished" : "2019-04-16T00:00:00",
  "dateModified" : "2019-04-16T00:00:00",
  "image" : "https:\/\/joehowarth.github.io\/img\/avatar.png",
  "keywords" : [ "Population Simulation, Design Doc" ],
  "mainEntityOfPage" : "https:\/\/joehowarth.github.io\/posts\/terraingenerator\/",
  "publisher" : {
    "@type": "Organization",
    "name" : "https:\/\/joehowarth.github.io",
    "logo" : {
        "@type" : "ImageObject",
        "url" : "https:\/\/joehowarth.github.io\/img\/avatar.png",
        "height" :  60 ,
        "width" :  60
    }
  }
}
</script>

<meta property="og:title" content="Terrain Generator Module" />
<meta property="og:description" content="Terrain Generator Module This module will produce the base maps that the rest of the world is built on top of. This module should be standalone and therefore easily runnable and configurable without the rest of the project. This has several advantages: 1. Faster compilation times =&gt; faster iteration feedback loop 2. Ability to generate many candidate maps and select the most interesting ones to build a full world with.">
<meta property="og:image" content="https://joehowarth.github.io/img/avatar.png" />
<meta property="og:url" content="https://joehowarth.github.io/posts/terraingenerator/" />
<meta property="og:type" content="website" />
<meta property="og:site_name" content="Joe Howarth" />

  <meta name="twitter:title" content="Terrain Generator Module" />
  <meta name="twitter:description" content="Terrain Generator Module This module will produce the base maps that the rest of the world is built on top of. This module should be standalone and therefore easily runnable and configurable without …">
  <meta name="twitter:image" content="https://joehowarth.github.io/img/avatar.png" />
  <meta name="twitter:card" content="summary" />
  <link href='https://joehowarth.github.io/img/favicon.ico' rel='icon' type='image/x-icon'/>
  <meta property="og:image" content="https://joehowarth.github.io/img/avatar.png" />
  <meta name="twitter:image" content="https://joehowarth.github.io/img/avatar.png" />
  <meta name="twitter:card" content="summary" />
  <meta property="og:url" content="https://joehowarth.github.io/posts/terraingenerator/" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Joe Howarth" />

  <meta name="generator" content="Hugo 0.58.3" />
  <link rel="alternate" href="https://joehowarth.github.io/index.xml" type="application/rss+xml" title="Joe Howarth"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css" integrity="sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"><link rel="stylesheet" href="https://joehowarth.github.io/css/main.css" /><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
  <link rel="stylesheet" href="https://joehowarth.github.io/css/highlight.min.css" /><link rel="stylesheet" href="https://joehowarth.github.io/css/codeblock.css" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css" integrity="sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css" integrity="sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R" crossorigin="anonymous">



  </head>
  <body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://joehowarth.github.io">Joe Howarth</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        
          
            <li>
              <a title="Blog" href="/">Blog</a>
            </li>
          
        
          
            <li class="navlinks-container">
              <a class="navlinks-parent">Historical Simulation</a>
              <div class="navlinks-children">
                
                  <a href="/posts/populationdesign">Population Design</a>
                
              </div>
            </li>
          
        
          
            <li>
              <a title="About" href="/page/about/">About</a>
            </li>
          
        
          
            <li>
              <a title="Tags" href="/tags">Tags</a>
            </li>
          
        

        

        
      </ul>
    </div>

    
      <div class="avatar-container">
        <div class="avatar-img-border">
          <a title="Joe Howarth" href="https://joehowarth.github.io">
            <img class="avatar-img" src="https://joehowarth.github.io/img/avatar.png" alt="Joe Howarth" />
          </a>
        </div>
      </div>
    

  </div>
</nav>




    


<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>


  
  
  






  

  <header class="header-section ">
    
    <div class="intro-header no-img">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div class="post-heading">
              
                <h1>Terrain Generator Module</h1>
              
              
              
              
                <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Posted on April 16, 2019
  
  
  
    &nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;724&nbsp;words
  
  
    &nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Joe Howarth
  
  
</span>


              
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>


    
<div class="container" role="main">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <article role="main" class="blog-post">
        

<h2 id="terrain-generator-module">Terrain Generator Module</h2>

<p>This module will produce the base maps that the rest of the world is built on top of.
This module should be standalone and therefore easily runnable and configurable without the
rest of the project. This has several advantages:
1. Faster compilation times =&gt; faster iteration feedback loop
2. Ability to generate many candidate maps and select the most interesting ones
   to build a full world with.
3. Loading a world from disk is, generally, much faster than having to recompute it each
   time from a seed =&gt; faster simulation load times.
4. Decoupling module allows easier contribution from volunteers who may not be
   familiar with Rust (cough, cough, Kostas)
5. Can extend 3rd party plate tectonics libraries in their native language.</p>

<h3 id="current-status">Current Status</h3>

<p>This is simultaneously the most complicated and least long-term aspect of the project.
Currently written in Javascript, the current client grew out of the map generator because
that initially allowed the easiest way to visualize the output directly without networking
infrastructure.</p>

<p>The current map generator is heavily inspired by Martin O&rsquo;Leary&rsquo;s Polygonal <a href="http://www-cs-students.stanford.edu/~amitp/game-programming/polygon-map-generation">Fantasy Map Generator</a>.
It computational geometry techniques and data structures (<a href="posts/MapGen_README.md">more detail</a>) that make for good regional scale maps
with plausible erosion and water flux, but the random hill placement does not scale well beyond
~500x500 km maps. Additionally, while the use of irregular triangles makes for a non-uniform and thus
organic looking map, it also significantly complicates many implementations.</p>

<h3 id="plans">Plans</h3>

<p>With this in mind, I&rsquo;m currently considering a full rewrite using a 2-stage generation process.
<strong>Stage I</strong> will use use a simpler grid representation at lower resolution and generate the macro
level features of a world map. <strong>Stage II</strong> will &lsquo;up-sample&rsquo; this low resolution map roughly to the detail
of the current polygonal generator. This will add low level detail and variation using some of
my existing techniques without slowing down the macro plate tectonics etc.</p>

<h5 id="stage-i">Stage I</h5>

<p>This stage should have a resolution between 100,000 km2 to 1,000 km2.
The heightmap generation should include
1. Tectonic drift
2. Erosion and importantly <em>fluvial deposition</em> (which was absent)
3. Hot Spots (hopefully)
4. Old Mountains</p>

<p>A water system becomes immediately necessary for the above and has obvious further utility
for placing rivers, lakes and generating the climate model and biomes. I have some concern with
artifacts arising from a grid based system, but hopefully <strong>Stage II</strong> can remove this.</p>

<p>While I would like to implement this myself as it&rsquo;s an interesting problem, it would likely take
more than a year considering my own experiences with a comparatively simple map generator
and existing projects such as <a href="https://github.com/davidson16807/tectonics.js">TectonicsJS</a>
or <a href="https://github.com/Mindwerks/worldengine">WorldEngine</a>&rsquo;s timescale. The most pragmatic
option would be to use an existing generator&rsquo;s output files and adapt them. Another possibility
doing a rewrite closely following an existing solution. None of the resources I&rsquo;ve found so
far are completely satisfactory, but the don&rsquo;t need to be if I can do some post-processing passes
and then up-sample once the base terrain has been generated.</p>

<p>I&rsquo;m particularly interested in TectonicJS&rsquo;s 2.0 architecture as it appears to be an extensible,
efficient fluid-dynamics approximation that could be used beyond plate tectonics for atmospheric
modelling, rivers and maybe even ocean currents.</p>

<h5 id="stage-ii">Stage II</h5>

<p>This stage should have a resolution between 100km2 to 10 km2. For this to be feasible only land
and ocean near land should be at this resolution and there could even be 2 &lsquo;lowering&rsquo; steps.
The basic idea is once plate tectonics, macro erosion/deposition and climate models have run /
reached equilibrium, the terrain can be refined and made more organic by a interpolating and
letting erosion/deposition run on a smaller scale. Then climate models can do several more iterations
starting from a plausible interpolation of the macro model as well.</p>

<p>This stage could either continue using square grids, or potentially hexagonal grids or even return
to the non-uniform Delaunay triangulation strategy.</p>

<h3 id="usage">Usage</h3>

<p>The output of <strong>stage II</strong> should be saved to disk and loadable by the
<a href="posts/WorldBuilding.md">World Building</a> module.</p>

<p>This whole module should be a separate runnable CLI process to facilitate fast compile iteration
(If this is JS based this is trivially true). This also means that many maps can be generated and
only the promising ones then undergo World Building, this is a bit of a cop out so that not every
map has to be good, just some.</p>


        
          <div class="blog-tags">
            
              <a href="https://joehowarth.github.io/tags/population-simulation/">Population Simulation</a>&nbsp;
            
              <a href="https://joehowarth.github.io/tags/design-doc/">Design Doc</a>&nbsp;
            
          </div>
        

        
            <hr/>
            <section id="social-share">
              <div class="list-inline footer-links">
                

<div class="share-box" aria-hidden="true">
    <ul class="share">
      
      <li>
        <a href="//twitter.com/share?url=https%3a%2f%2fjoehowarth.github.io%2fposts%2fterraingenerator%2f&amp;text=Terrain%20Generator%20Module&amp;via=" target="_blank" title="Share on Twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//plus.google.com/share?url=https%3a%2f%2fjoehowarth.github.io%2fposts%2fterraingenerator%2f" target="_blank" title="Share on Google Plus">
          <i class="fab fa-google-plus"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fjoehowarth.github.io%2fposts%2fterraingenerator%2f" target="_blank" title="Share on Facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//reddit.com/submit?url=https%3a%2f%2fjoehowarth.github.io%2fposts%2fterraingenerator%2f&amp;title=Terrain%20Generator%20Module" target="_blank" title="Share on Reddit">
          <i class="fab fa-reddit"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fjoehowarth.github.io%2fposts%2fterraingenerator%2f&amp;title=Terrain%20Generator%20Module" target="_blank" title="Share on LinkedIn">
          <i class="fab fa-linkedin"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.stumbleupon.com/submit?url=https%3a%2f%2fjoehowarth.github.io%2fposts%2fterraingenerator%2f&amp;title=Terrain%20Generator%20Module" target="_blank" title="Share on StumbleUpon">
          <i class="fab fa-stumbleupon"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.pinterest.com/pin/create/button/?url=https%3a%2f%2fjoehowarth.github.io%2fposts%2fterraingenerator%2f&amp;description=Terrain%20Generator%20Module" target="_blank" title="Share on Pinterest">
          <i class="fab fa-pinterest"></i>
        </a>
      </li>
    </ul>
  </div>
  
              </div>
            </section>
        

        
      </article>

      
        <ul class="pager blog-pager">
          
            <li class="previous">
              <a href="https://joehowarth.github.io/posts/worldbuilding/" data-toggle="tooltip" data-placement="top" title="World Building Module">&larr; Previous Post</a>
            </li>
          
          
            <li class="next">
              <a href="https://joehowarth.github.io/posts/architecture/" data-toggle="tooltip" data-placement="top" title="Architecture">Next Post &rarr;</a>
            </li>
          
        </ul>
      


      
        
        
      

    </div>
  </div>
</div>

    <footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
              <li>
                <a href="mailto:JosepheHowarth@gmail.com" title="Email me">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fas fa-envelope fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://www.facebook.com/joseph.e.howarth" title="Facebook">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-facebook fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://github.com/JoeHowarth" title="GitHub">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
          
          <li>
            <a href="" title="RSS">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fas fa-rss fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
        </ul>
        <p class="credits copyright text-muted">
          
            
              Joe Howarth
            
          

          &nbsp;&bull;&nbsp;&copy;
          
            2020
          

          
            &nbsp;&bull;&nbsp;
            <a href="https://joehowarth.github.io">Joe Howarth</a>
          
        </p>
        
        <p class="credits theme-by text-muted">
          <a href="http://gohugo.io">Hugo v0.58.3</a> powered &nbsp;&bull;&nbsp; Theme by <a href="http://deanattali.com/beautiful-jekyll/">Beautiful Jekyll</a> adapted to <a href="https://github.com/halogenica/beautifulhugo">Beautiful Hugo</a>
          
        </p>
      </div>
    </div>
  </div>
</footer><script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.js" integrity="sha384-K3vbOmF2BtaVai+Qk37uypf7VrgBubhQreNQe9aGsz9lB63dIFiQVlJbr92dw2Lx" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/contrib/auto-render.min.js" integrity="sha384-kmZOZB5ObwgQnS/DuDg6TScgOiWWBiVt0plIRkZCmE6rDZGrEOQeHM5PcHi+nyqe" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<script src="https://joehowarth.github.io/js/main.js"></script>
<script src="https://joehowarth.github.io/js/highlight.min.js"></script>
<script> hljs.initHighlightingOnLoad(); </script>
<script> $(document).ready(function() {$("pre.chroma").css("padding","0");}); </script><script> renderMathInElement(document.body); </script><script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js" integrity="sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js" integrity="sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q" crossorigin="anonymous"></script><script src="https://joehowarth.github.io/js/load-photoswipe.js"></script>









  </body>
</html>

